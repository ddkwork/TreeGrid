name: Build and Publish

on:
  push:
    branches:
      - master  # 你可以指定要监听的分支

jobs:
  build:
    runs-on: windows-latest  # 在Windows环境中运行

    steps:
      - name: Checkout code
        uses: actions/checkout@v2  # 检出代码库

      - name: Setup MSBuild
        uses: microsoft/setup-msbuild@v1  # 设置MSBuild环境

      - name: Build Solution
        run: |
          msbuild TreeGrid.sln /p:Configuration=Release  # 编译解决方案

      - name: Publish
        run: |
          dotnet publish TreeGrid/TreeGrid.csproj -c Release -o ./publish  # 发布到指定目录

      - name: Upload Release Artifacts
        uses: actions/upload-artifact@v3  # 更新到最新的版本
        with:
          name: TreeGrid-release
          path: ./publish  # 上传发布的内容
